{"version":3,"sources":["../../src/lib/connectUpdateMenuToLayout.js"],"names":["connectUpdateMenuToLayout","WrappedComponent","UpdateMenuConnectedComponent","props","context","updateUpdateMenu","bind","setLocals","nextProps","nextContext","updateMenuIndex","container","fullContainer","updatemenus","fullUpdateMenus","getValObject","attr","updateContainer","update","newUpdate","key","newkey","Component","displayName","propTypes","PropTypes","number","isRequired","contextTypes","object","onUpdate","func","childContextTypes","plotly_editor_traits"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\n\nexport default function connectUpdateMenuToLayout(WrappedComponent) {\n  class UpdateMenuConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n      this.updateUpdateMenu = this.updateUpdateMenu.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {updateMenuIndex} = props;\n      const {container, fullContainer} = context;\n\n      const updatemenus = container.updatemenus || [];\n      const fullUpdateMenus = fullContainer.updatemenus || [];\n      this.container = updatemenus[updateMenuIndex];\n      this.fullContainer = fullUpdateMenus[updateMenuIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject ? null : this.context.getValObject(`updatemenus[].${attr}`),\n        updateContainer: this.updateUpdateMenu,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateUpdateMenu(update) {\n      const newUpdate = {};\n      const {updateMenuIndex} = this.props;\n      for (const key in update) {\n        const newkey = `updatemenus[${updateMenuIndex}].${key}`;\n        newUpdate[newkey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  UpdateMenuConnectedComponent.displayName = `UpdateMenuConnected${getDisplayName(\n    WrappedComponent\n  )}`;\n\n  UpdateMenuConnectedComponent.propTypes = {\n    updateMenuIndex: PropTypes.number.isRequired,\n  };\n\n  UpdateMenuConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  UpdateMenuConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  UpdateMenuConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return UpdateMenuConnectedComponent;\n}\n"],"file":"connectUpdateMenuToLayout.js"}