{"version":3,"sources":["../../src/lib/connectLayoutToPlot.js"],"names":["connectLayoutToPlot","WrappedComponent","LayoutConnectedComponent","context","layout","fullLayout","plotly","onUpdate","updateContainer","update","type","EDITOR_ACTIONS","UPDATE_LAYOUT","payload","getValObject","attr","PlotSchema","getLayoutValObject","parts","container","fullContainer","props","Component","displayName","contextTypes","PropTypes","object","func","childContextTypes","plotly_editor_traits"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEe,SAASA,mBAAT,CAA6BC,gBAA7B,EAA+C;AAAA,MACtDC,wBADsD;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA,aAE1D,2BAAkB;AAChB,4BAA+C,KAAKC,OAApD;AAAA,YAAOC,MAAP,iBAAOA,MAAP;AAAA,YAAeC,UAAf,iBAAeA,UAAf;AAAA,YAA2BC,MAA3B,iBAA2BA,MAA3B;AAAA,YAAmCC,QAAnC,iBAAmCA,QAAnC;;AAEA,YAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACC,MAAD,EAAY;AAClC,cAAI,CAACF,QAAL,EAAe;AACb;AACD;;AACDA,UAAAA,QAAQ,CAAC;AACPG,YAAAA,IAAI,EAAEC,0BAAeC,aADd;AAEPC,YAAAA,OAAO,EAAE;AACPJ,cAAAA,MAAM,EAANA;AADO;AAFF,WAAD,CAAR;AAMD,SAVD;;AAYA,eAAO;AACLK,UAAAA,YAAY,EAAE,sBAACC,IAAD;AAAA,mBACZ,CAACT,MAAD,GACI,IADJ,GAEIA,MAAM,CAACU,UAAP,CAAkBC,kBAAlB,CAAqCZ,UAArC,EAAiD,8BAAe,EAAf,EAAmBU,IAAnB,EAAyBG,KAA1E,CAHQ;AAAA,WADT;AAKLV,UAAAA,eAAe,EAAfA,eALK;AAMLW,UAAAA,SAAS,EAAEf,MANN;AAOLgB,UAAAA,aAAa,EAAEf;AAPV,SAAP;AASD;AA1ByD;AAAA;AAAA,aA4B1D,kBAAS;AACP,4BAAO,6BAAC,gBAAD,EAAsB,KAAKgB,KAA3B,CAAP;AACD;AA9ByD;;AAAA;AAAA,IACrBC,gBADqB;;AAiC5DpB,EAAAA,wBAAwB,CAACqB,WAAzB,4BAAyD,yBAAetB,gBAAf,CAAzD;AAEAC,EAAAA,wBAAwB,CAACsB,YAAzB,GAAwC;AACtCpB,IAAAA,MAAM,EAAEqB,mBAAUC,MADoB;AAEtCrB,IAAAA,UAAU,EAAEoB,mBAAUC,MAFgB;AAGtCpB,IAAAA,MAAM,EAAEmB,mBAAUC,MAHoB;AAItCnB,IAAAA,QAAQ,EAAEkB,mBAAUE;AAJkB,GAAxC;AAOAzB,EAAAA,wBAAwB,CAAC0B,iBAAzB,GAA6C;AAC3Cd,IAAAA,YAAY,EAAEW,mBAAUE,IADmB;AAE3CnB,IAAAA,eAAe,EAAEiB,mBAAUE,IAFgB;AAG3CR,IAAAA,SAAS,EAAEM,mBAAUC,MAHsB;AAI3CN,IAAAA,aAAa,EAAEK,mBAAUC;AAJkB,GAA7C;AAOA,MAAOG,oBAAP,GAA+B5B,gBAA/B,CAAO4B,oBAAP;AACA3B,EAAAA,wBAAwB,CAAC2B,oBAAzB,GAAgDA,oBAAhD;AAEA,SAAO3B,wBAAP;AACD","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport nestedProperty from 'plotly.js/src/lib/nested_property';\nimport {getDisplayName} from '../lib';\nimport {EDITOR_ACTIONS} from './constants';\n\nexport default function connectLayoutToPlot(WrappedComponent) {\n  class LayoutConnectedComponent extends Component {\n    getChildContext() {\n      const {layout, fullLayout, plotly, onUpdate} = this.context;\n\n      const updateContainer = (update) => {\n        if (!onUpdate) {\n          return;\n        }\n        onUpdate({\n          type: EDITOR_ACTIONS.UPDATE_LAYOUT,\n          payload: {\n            update,\n          },\n        });\n      };\n\n      return {\n        getValObject: (attr) =>\n          !plotly\n            ? null\n            : plotly.PlotSchema.getLayoutValObject(fullLayout, nestedProperty({}, attr).parts),\n        updateContainer,\n        container: layout,\n        fullContainer: fullLayout,\n      };\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  LayoutConnectedComponent.displayName = `LayoutConnected${getDisplayName(WrappedComponent)}`;\n\n  LayoutConnectedComponent.contextTypes = {\n    layout: PropTypes.object,\n    fullLayout: PropTypes.object,\n    plotly: PropTypes.object,\n    onUpdate: PropTypes.func,\n  };\n\n  LayoutConnectedComponent.childContextTypes = {\n    getValObject: PropTypes.func,\n    updateContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  LayoutConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return LayoutConnectedComponent;\n}\n"],"file":"connectLayoutToPlot.js"}