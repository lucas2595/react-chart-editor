{"version":3,"sources":["../../src/lib/connectRangeSelectorToAxis.js"],"names":["connectRangeSelectorToAxis","WrappedComponent","RangeSelectorConnectedComponent","props","context","deleteRangeselector","bind","updateRangeselector","setLocals","nextProps","nextContext","rangeselectorIndex","container","fullContainer","rangeselectors","rangeselector","buttons","fullRangeselectors","getValObject","attr","updateContainer","deleteContainer","update","newUpdate","key","newkey","onUpdate","type","EDITOR_ACTIONS","DELETE_RANGESELECTOR","payload","axisId","_name","Component","displayName","propTypes","PropTypes","number","isRequired","contextTypes","object","data","array","func","childContextTypes","plotly_editor_traits"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {getDisplayName} from '../lib';\nimport {EDITOR_ACTIONS} from './constants';\n\nexport default function connectRangeSelectorToAxis(WrappedComponent) {\n  class RangeSelectorConnectedComponent extends Component {\n    constructor(props, context) {\n      super(props, context);\n\n      this.deleteRangeselector = this.deleteRangeselector.bind(this);\n      this.updateRangeselector = this.updateRangeselector.bind(this);\n      this.setLocals(props, context);\n    }\n\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n      this.setLocals(nextProps, nextContext);\n    }\n\n    setLocals(props, context) {\n      const {rangeselectorIndex} = props;\n      const {container, fullContainer} = context;\n\n      const rangeselectors = container.rangeselector ? container.rangeselector.buttons || [] : [];\n      const fullRangeselectors = fullContainer.rangeselector\n        ? fullContainer.rangeselector.buttons || []\n        : [];\n      this.container = rangeselectors[rangeselectorIndex];\n      this.fullContainer = fullRangeselectors[rangeselectorIndex];\n    }\n\n    getChildContext() {\n      return {\n        getValObject: (attr) =>\n          !this.context.getValObject\n            ? null\n            : this.context.getValObject(`rangeselector.buttons[].${attr}`),\n        updateContainer: this.updateRangeselector,\n        deleteContainer: this.deleteRangeselector,\n        container: this.container,\n        fullContainer: this.fullContainer,\n      };\n    }\n\n    updateRangeselector(update) {\n      const newUpdate = {};\n      const {rangeselectorIndex} = this.props;\n      for (const key in update) {\n        const newkey = `rangeselector.buttons[${rangeselectorIndex}].${key}`;\n        newUpdate[newkey] = update[key];\n      }\n      this.context.updateContainer(newUpdate);\n    }\n\n    deleteRangeselector() {\n      if (this.context.onUpdate) {\n        this.context.onUpdate({\n          type: EDITOR_ACTIONS.DELETE_RANGESELECTOR,\n          payload: {\n            axisId: this.context.fullContainer._name,\n            rangeselectorIndex: this.props.rangeselectorIndex,\n          },\n        });\n      }\n    }\n\n    render() {\n      return <WrappedComponent {...this.props} />;\n    }\n  }\n\n  RangeSelectorConnectedComponent.displayName = `RangeSelectorConnected${getDisplayName(\n    WrappedComponent\n  )}`;\n\n  RangeSelectorConnectedComponent.propTypes = {\n    rangeselectorIndex: PropTypes.number.isRequired,\n  };\n\n  RangeSelectorConnectedComponent.contextTypes = {\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    data: PropTypes.array,\n    onUpdate: PropTypes.func,\n    updateContainer: PropTypes.func,\n    getValObject: PropTypes.func,\n  };\n\n  RangeSelectorConnectedComponent.childContextTypes = {\n    updateContainer: PropTypes.func,\n    deleteContainer: PropTypes.func,\n    container: PropTypes.object,\n    fullContainer: PropTypes.object,\n    getValObject: PropTypes.func,\n  };\n\n  const {plotly_editor_traits} = WrappedComponent;\n  RangeSelectorConnectedComponent.plotly_editor_traits = plotly_editor_traits;\n\n  return RangeSelectorConnectedComponent;\n}\n"],"file":"connectRangeSelectorToAxis.js"}